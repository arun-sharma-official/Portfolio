<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Smart Salary Planner Pro</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: "Poppins", -apple-system, BlinkMacSystemFont, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: #333;
      min-height: 100vh;
      padding: 20px 10px;
    }

    .container {
      max-width: 850px;
      margin: 0 auto;
      background: #fff;
      padding: 30px;
      border-radius: 20px;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
    }

    header {
      text-align: center;
      margin-bottom: 30px;
      padding-bottom: 20px;
      border-bottom: 3px solid #f0f0f0;
    }

    h1 {
      color: #222;
      font-size: 32px;
      margin-bottom: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
    }

    .subtitle {
      color: #666;
      font-size: 14px;
    }

    .input-section {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      padding: 25px;
      border-radius: 15px;
      margin-bottom: 25px;
      color: white;
    }

    .input-box {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      justify-content: center;
      align-items: center;
    }

    input {
      padding: 12px 20px;
      width: 250px;
      border: none;
      border-radius: 10px;
      font-size: 16px;
      outline: none;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
    }

    button {
      background: #fff;
      color: #667eea;
      border: none;
      padding: 12px 25px;
      border-radius: 10px;
      cursor: pointer;
      font-size: 16px;
      font-weight: 600;
      transition: all 0.3s ease;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
    }

    button:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 15px rgba(0, 0, 0, 0.2);
    }

    .btn-secondary {
      background: #ff6b6b;
      color: white;
    }

    .btn-secondary:hover {
      background: #ee5a52;
    }

    .btn-success {
      background: #51cf66;
      color: white;
    }

    .btn-success:hover {
      background: #40c057;
    }

    .action-buttons {
      display: flex;
      gap: 10px;
      justify-content: center;
      margin-top: 20px;
      flex-wrap: wrap;
    }

    .summary-cards {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 15px;
      margin-bottom: 25px;
    }

    .summary-card {
      background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
      color: white;
      padding: 20px;
      border-radius: 12px;
      text-align: center;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }

    .summary-card h4 {
      font-size: 14px;
      margin-bottom: 8px;
      opacity: 0.9;
    }

    .summary-card .value {
      font-size: 24px;
      font-weight: bold;
    }

    .card {
      background: #f9fafc;
      padding: 20px;
      border-radius: 12px;
      margin-bottom: 15px;
      border-left: 6px solid #007bff;
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
    }

    .card:hover {
      background: #f1f6ff;
      transform: translateX(5px);
      box-shadow: 0 4px 15px rgba(0, 123, 255, 0.2);
    }

    .card-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 10px;
    }

    .card h3 {
      margin: 0;
      color: #007bff;
      font-size: 18px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .edit-btn {
      background: #ffc107;
      color: #333;
      padding: 5px 12px;
      font-size: 12px;
      border-radius: 6px;
      cursor: pointer;
      border: none;
      display:none;
    }

    .amount-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin: 10px 0;
    }

    .amount {
      font-weight: bold;
      color: #333;
      font-size: 20px;
    }

    .percentage {
      background: #007bff;
      color: white;
      padding: 5px 12px;
      border-radius: 20px;
      font-size: 14px;
      font-weight: bold;
    }

    .description {
      font-size: 14px;
      color: #555;
      margin-top: 10px;
      line-height: 1.6;
    }

    .progress-bar {
      width: 100%;
      height: 12px;
      background: #e9ecef;
      border-radius: 10px;
      overflow: hidden;
      margin-top: 12px;
      box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, #007bff, #00c6ff);
      width: 0%;
      border-radius: 10px;
      transition: width 1.2s cubic-bezier(0.65, 0, 0.35, 1);
      position: relative;
    }

    .progress-fill::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      bottom: 0;
      right: 0;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
      animation: shimmer 2s infinite;
    }

    @keyframes shimmer {
      0% { transform: translateX(-100%); }
      100% { transform: translateX(100%); }
    }

    .chart-container {
      background: #f9fafc;
      padding: 25px;
      border-radius: 12px;
      margin-bottom: 25px;
      text-align: center;
    }

    .chart-container h3 {
      margin-bottom: 20px;
      color: #333;
    }

    .pie-chart {
      width: 300px;
      height: 300px;
      margin: 0 auto;
      border-radius: 50%;
      display: none;
    }

    .empty-state {
      text-align: center;
      padding: 60px 20px;
      color: #999;
    }

    .empty-state svg {
      width: 120px;
      height: 120px;
      margin-bottom: 20px;
      opacity: 0.3;
    }

    .hidden {
      display: none;
    }

    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.6);
      z-index: 1000;
      justify-content: center;
      align-items: center;
    }

    .modal.active {
      display: flex;
    }

    .modal-content {
      background: white;
      padding: 30px;
      border-radius: 15px;
      max-width: 400px;
      width: 90%;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
    }

    .modal-content h3 {
      margin-bottom: 20px;
    }

    .modal-content input {
      width: 100%;
      margin-bottom: 15px;
    }

    .modal-actions {
      display: flex;
      gap: 10px;
      justify-content: flex-end;
    }

    @media print {
      body {
        background: white;
      }
      .input-section,
      .action-buttons,
      button {
        display: none !important;
      }
    }

    @media (max-width: 768px) {
      .container {
        padding: 20px;
      }

      h1 {
        font-size: 24px;
      }

      input {
        width: 100%;
      }

      .input-box {
        flex-direction: column;
      }

      .summary-cards {
        grid-template-columns: 1fr;
      }
    }

    .toast {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: #51cf66;
      color: white;
      padding: 15px 25px;
      border-radius: 10px;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
      display: none;
      z-index: 2000;
      animation: slideIn 0.3s ease;
    }

    @keyframes slideIn {
      from {
        transform: translateX(400px);
        opacity: 0;
      }
      to {
        transform: translateX(0);
        opacity: 1;
      }
    }

    .legend {
      display: flex;
      flex-wrap: wrap;
      gap: 15px;
      justify-content: center;
      margin-top: 20px;
    }

    .legend-item {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 13px;
    }

    .legend-color {
      width: 20px;
      height: 20px;
      border-radius: 4px;
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>
        <span>üí∞</span>
        Smart Salary Planner Pro
      </h1>
      <p class="subtitle">Apne paise ko samajhdaari se manage karo aur apne future ko secure banao</p>
    </header>

    <div class="input-section">
      <div class="input-box">
        <input type="number" id="income" placeholder="Apni income enter karo (‚Çπ)" />
        <button onclick="calculate()">üìä Calculate</button>
        <button class="btn-secondary" onclick="reset()">üîÑ Reset</button>
      </div>
      <div class="action-buttons">
        <button class="btn-success" onclick="saveData()">üíæ Save Plan</button>
        <button class="btn-success" onclick="loadData()">üìÇ Load Saved</button>
        <button onclick="printPlan()">üñ®Ô∏è Print/PDF</button>
        <button onclick="sharePlan()">üì§ Share</button>
      </div>
    </div>

    <div id="summarySection" class="hidden">
      <div class="summary-cards">
        <div class="summary-card" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
          <h4>Total Income</h4>
          <div class="value" id="totalIncome">‚Çπ0</div>
        </div>
        <div class="summary-card" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);">
          <h4>Total Allocated</h4>
          <div class="value" id="totalAllocated">‚Çπ0</div>
        </div>
        <div class="summary-card" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);">
          <h4>Categories</h4>
          <div class="value" id="totalCategories">6</div>
        </div>
      </div>
    </div>

    <div id="result">
      <div class="empty-state">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M12 2v20M2 12h20"/>
          <circle cx="12" cy="12" r="10"/>
        </svg>
        <h3>Apni income enter karo aur Calculate button dabao</h3>
        <p>Budget planning shuru karne ke liye upar income daaliye</p>
      </div>
    </div>
  </div>

  <!-- Modal for editing percentages -->
  <div id="editModal" class="modal">
    <div class="modal-content">
      <h3>Edit Category</h3>
      <input type="text" id="editName" placeholder="Category name" readonly />
      <input type="number" id="editPercent" placeholder="Percentage (%)" min="0" max="100" />
      <div class="modal-actions">
        <button class="btn-secondary" onclick="closeModal()">Cancel</button>
        <button class="btn-success" onclick="saveEdit()">Save</button>
      </div>
    </div>
  </div>

  <div id="toast" class="toast"></div>

  <script>
    const colors = ['#007bff', '#28a745', '#ffc107', '#dc3545', '#6f42c1', '#fd7e14'];
    
    let data = [
      {
        name: "Essentials (Food, Travel, etc.)",
        percent: 50,
        description: "Roz ke zaroori kharche jaise khana, travel, recharge, rent, aur daily needs. Ye basic living ke liye hota hai.",
        icon: "üçΩÔ∏è"
      },
      {
        name: "Savings / Emergency Fund",
        percent: 10,
        description: "Har mahine thoda paisa bacha kar rakhiye taaki emergency time (medical, job loss, etc.) me help mile.",
        icon: "üí∞"
      },
      {
        name: "Skill Growth / Education",
        percent: 15,
        description: "Apne development me invest kijiye ‚Äî jaise computer course, online training, ya new learning materials.",
        icon: "üìö"
      },
      {
        name: "Investment / Future Goal",
        percent: 10,
        description: "Long-term goals ke liye invest kijiye ‚Äî jaise SIP, RD, mutual fund, ya business fund.",
        icon: "üìà"
      },
      {
        name: "Family / Charity / Help",
        percent: 5,
        description: "Apne parivaar ya kisi needy vyakti ki help kijiye. Ye emotional aur social balance ke liye zaroori hai.",
        icon: "‚ù§Ô∏è"
      },
      {
        name: "Enjoyment / Self-Care",
        percent: 10,
        description: "Apne liye khushi me bhi thoda paisa rakhiye ‚Äî jaise outing, treat, ya self-care. Motivation ke liye zaroori hai.",
        icon: "üéâ"
      }
    ];

    let currentEditIndex = -1;
    let lastIncome = 0;

    function calculate() {
      const income = parseFloat(document.getElementById("income").value);
      const resultDiv = document.getElementById("result");
      const summarySection = document.getElementById("summarySection");
      
      resultDiv.innerHTML = "";

      if (isNaN(income) || income <= 0) {
        resultDiv.innerHTML = "<div class='empty-state'><h3 style='color:#dc3545;'>‚ùå Kripya ek valid income amount enter karo</h3></div>";
        summarySection.classList.add("hidden");
        return;
      }

      lastIncome = income;
      summarySection.classList.remove("hidden");

      // Update summary
      document.getElementById("totalIncome").textContent = `‚Çπ${income.toFixed(2)}`;
      document.getElementById("totalAllocated").textContent = `‚Çπ${income.toFixed(2)}`;
      document.getElementById("totalCategories").textContent = data.length;

      data.forEach((item, index) => {
        const amount = (income * item.percent) / 100;
        const card = document.createElement("div");
        card.classList.add("card");
        card.style.borderLeftColor = colors[index % colors.length];

        card.innerHTML = `
          <div class="card-header">
            <h3>${item.icon} ${item.name}</h3>
            <button class="edit-btn" onclick="openEditModal(${index})">‚úèÔ∏è Edit</button>
          </div>
          <div class="amount-row">
            <span class="amount">‚Çπ${amount.toFixed(2)}</span>
            <span class="percentage">${item.percent}%</span>
          </div>
          <div class="progress-bar">
            <div class="progress-fill" style="width:0%; background: linear-gradient(90deg, ${colors[index % colors.length]}, ${lightenColor(colors[index % colors.length])});"></div>
          </div>
          <p class="description">${item.description}</p>
        `;

        resultDiv.appendChild(card);

        setTimeout(() => {
          card.querySelector(".progress-fill").style.width = `${item.percent}%`;
        }, 100 + (index * 100));
      });

      showToast("‚úÖ Budget plan successfully calculated!");
    }

    function lightenColor(color) {
      const hex = color.replace('#', '');
      const r = parseInt(hex.substr(0, 2), 16);
      const g = parseInt(hex.substr(2, 2), 16);
      const b = parseInt(hex.substr(4, 2), 16);
      return `rgb(${Math.min(r + 50, 255)}, ${Math.min(g + 50, 255)}, ${Math.min(b + 50, 255)})`;
    }

    function openEditModal(index) {
      currentEditIndex = index;
      document.getElementById("editName").value = data[index].name;
      document.getElementById("editPercent").value = data[index].percent;
      document.getElementById("editModal").classList.add("active");
    }

    function closeModal() {
      document.getElementById("editModal").classList.remove("active");
      currentEditIndex = -1;
    }

    function saveEdit() {
      const newPercent = parseFloat(document.getElementById("editPercent").value);
      
      if (isNaN(newPercent) || newPercent < 0 || newPercent > 100) {
        alert("Please enter a valid percentage between 0 and 100");
        return;
      }

      data[currentEditIndex].percent = newPercent;
      closeModal();
      
      if (lastIncome > 0) {
        document.getElementById("income").value = lastIncome;
        calculate();
      }
      
      showToast("‚úÖ Category updated successfully!");
    }

    function reset() {
      document.getElementById("income").value = "";
      document.getElementById("result").innerHTML = `
        <div class="empty-state">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M12 2v20M2 12h20"/>
            <circle cx="12" cy="12" r="10"/>
          </svg>
          <h3>Apni income enter karo aur Calculate button dabao</h3>
          <p>Budget planning shuru karne ke liye upar income daaliye</p>
        </div>
      `;
      document.getElementById("summarySection").classList.add("hidden");
      lastIncome = 0;
      showToast("üîÑ Reset complete!");
    }

    function saveData() {
      const income = parseFloat(document.getElementById("income").value);
      if (isNaN(income) || income <= 0) {
        alert("Pehle income enter karke calculate karo!");
        return;
      }

      const saveObj = {
        income: income,
        data: data,
        timestamp: new Date().toISOString()
      };

      localStorage.setItem("salaryPlan", JSON.stringify(saveObj));
      showToast("üíæ Plan saved successfully!");
    }

    function loadData() {
      const saved = localStorage.getItem("salaryPlan");
      if (!saved) {
        alert("Koi saved plan nahi mila!");
        return;
      }

      const saveObj = JSON.parse(saved);
      data = saveObj.data;
      document.getElementById("income").value = saveObj.income;
      calculate();
      showToast("üìÇ Plan loaded successfully!");
    }

    function printPlan() {
      if (lastIncome === 0) {
        alert("Pehle plan calculate karo!");
        return;
      }
      window.print();
    }

    function sharePlan() {
      if (lastIncome === 0) {
        alert("Pehle plan calculate karo!");
        return;
      }

      let text = `üí∞ My Salary Plan (Income: ‚Çπ${lastIncome})\n\n`;
      data.forEach(item => {
        const amount = (lastIncome * item.percent) / 100;
        text += `${item.icon} ${item.name}: ‚Çπ${amount.toFixed(2)} (${item.percent}%)\n`;
      });

      if (navigator.share) {
        navigator.share({
          title: 'My Salary Plan',
          text: text
        }).catch(() => {});
      } else {
        navigator.clipboard.writeText(text);
        showToast("üìã Plan copied to clipboard!");
      }
    }

    function showToast(message) {
      const toast = document.getElementById("toast");
      toast.textContent = message;
      toast.style.display = "block";
      
      setTimeout(() => {
        toast.style.display = "none";
      }, 3000);
    }

    // Load saved data on page load
    window.addEventListener('load', () => {
      const saved = localStorage.getItem("salaryPlan");
      if (saved) {
        const saveObj = JSON.parse(saved);
        data = saveObj.data;
      }
    });
  </script>
</body>
</html>
